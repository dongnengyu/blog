<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="dongnengyu,dongnengyu@gamil.com"><title> · 做只猫</title><meta name="description" content="哲学家就餐问题
        
        
        
        
        
        
    
    
        
            哲学家就餐问题
#码农

/**
 * xiaomu (dongnengyu@gmail.com)
 * 2018"><meta name="keywords" content="java"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">做只猫</a></h3><div class="description"><p>Nothing lasts forever.</p></div></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a></a></h3></div><div class="post-content"><!DOCTYPE html>
<html>
    <head>
        <title>哲学家就餐问题</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="created" content="2018-03-20T21:35:51+0800">
        <meta name="modified" content="2018-03-20T21:36:14+0800">
        <meta name="tags" content="码农">
        <meta name="last device" content="小木的MacBook Pro">
    </head>
    <body>
        <div class="note-wrapper">
            <h1>哲学家就餐问题</h1>
<p><span class="hashtag">#码农</span></p>
<br>
<pre><code class="code-multiline"><span class="sf_code_syntax_documentation_comment">/**
 * xiaomu (dongnengyu@gmail.com)
 * 2018/3/20
 */</span>

<span class="sf_code_syntax_comment">//////////////////////////哲学家类
</span><span class="sf_code_syntax_project">public</span> <span class="sf_code_syntax_project">class</span> <span class="sf_code_syntax_project">Philosopher</span> <span class="sf_code_syntax_project">extends</span> <span class="sf_code_syntax_project">Thread</span> {
    <span class="sf_code_syntax_project">private</span> <span class="sf_code_syntax_project">String</span> name;
    <span class="sf_code_syntax_project">private</span> <span class="sf_code_syntax_project">Fork</span> fork;

    <span class="sf_code_syntax_project">public</span> <span class="sf_code_syntax_project">Philosopher</span>(<span class="sf_code_syntax_project">String</span> name , <span class="sf_code_syntax_project">Fork</span> fork){
        <span class="sf_code_syntax_keyword">super</span>(name);
        <span class="sf_code_syntax_keyword">this.</span>fork<span class="sf_code_syntax_keyword">=</span>fork;
        <span class="sf_code_syntax_keyword">this.</span>name<span class="sf_code_syntax_keyword">=</span>name;
    }

    <span class="sf_code_syntax_project">public</span> <span class="sf_code_syntax_project">void</span> run(){
        <span class="sf_code_syntax_keyword">while</span> (<span class="sf_code_syntax_number">true</span>){
            <span class="sf_code_syntax_keyword">try</span> {
                <span class="sf_code_syntax_project">System</span><span class="sf_code_syntax_keyword">.</span>out<span class="sf_code_syntax_keyword">.</span>println(name <span class="sf_code_syntax_keyword">+</span> <span class="sf_code_syntax_string">" is thinking "</span>);
                sleep(<span class="sf_code_syntax_number">1000</span>);<span class="sf_code_syntax_comment">//模拟思考时间
</span>            } <span class="sf_code_syntax_keyword">catch</span> (<span class="sf_code_syntax_project">InterruptedException</span> e) {
                e<span class="sf_code_syntax_keyword">.</span>printStackTrace();
            }
            fork<span class="sf_code_syntax_keyword">.</span>takeFork();
            <span class="sf_code_syntax_keyword">try</span> {
                <span class="sf_code_syntax_project">System</span><span class="sf_code_syntax_keyword">.</span>out<span class="sf_code_syntax_keyword">.</span>println(name <span class="sf_code_syntax_keyword">+</span> <span class="sf_code_syntax_string">" is eating "</span>);
                sleep(<span class="sf_code_syntax_number">1000</span>);<span class="sf_code_syntax_comment">//模拟吃饭时间
</span>            } <span class="sf_code_syntax_keyword">catch</span> (<span class="sf_code_syntax_project">InterruptedException</span> e) {
                e<span class="sf_code_syntax_keyword">.</span>printStackTrace();
            }
            fork<span class="sf_code_syntax_keyword">.</span>putFork();
        }
    }
}

<span class="sf_code_syntax_comment">//////////////////////////叉子类
</span>
<span class="sf_code_syntax_project">class</span> <span class="sf_code_syntax_project">Fork</span>{
    <span class="sf_code_syntax_comment">//五只叉子,初始状态为false，表示放在桌子上
</span>    <span class="sf_code_syntax_project">private</span> <span class="sf_code_syntax_project">boolean</span>[] used <span class="sf_code_syntax_keyword">=</span> {<span class="sf_code_syntax_number">false</span>,<span class="sf_code_syntax_number">false</span>,<span class="sf_code_syntax_number">false</span>,<span class="sf_code_syntax_number">false</span>,<span class="sf_code_syntax_number">false</span>};

    <span class="sf_code_syntax_documentation_comment">/*只有当左右手的筷子都未被使用时，才允许获取筷子，且必须同时获取左右手筷子*/</span>
    <span class="sf_code_syntax_project">public</span> <span class="sf_code_syntax_project">synchronized</span> <span class="sf_code_syntax_project">void</span> takeFork(){
        <span class="sf_code_syntax_project">String</span>  name <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_project">Thread</span><span class="sf_code_syntax_keyword">.</span>currentThread()<span class="sf_code_syntax_keyword">.</span>getName();
        <span class="sf_code_syntax_project">int</span> i <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_project">Integer</span><span class="sf_code_syntax_keyword">.</span>parseInt(name);
        <span class="sf_code_syntax_keyword">while</span> (used[i] <span class="sf_code_syntax_keyword">||</span> used[(i<span class="sf_code_syntax_keyword">+</span><span class="sf_code_syntax_number">1</span>)<span class="sf_code_syntax_keyword">%</span><span class="sf_code_syntax_number">5</span>]){
            <span class="sf_code_syntax_keyword">try</span> {
                wait();
            } <span class="sf_code_syntax_keyword">catch</span> (<span class="sf_code_syntax_project">InterruptedException</span> e) {
                e<span class="sf_code_syntax_keyword">.</span>printStackTrace();
            }

        }
        used[i] <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">true</span>;
        used[(i<span class="sf_code_syntax_keyword">+</span><span class="sf_code_syntax_number">1</span>)<span class="sf_code_syntax_keyword">%</span><span class="sf_code_syntax_number">5</span>] <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">true</span>;
        notifyAll();

    }

    <span class="sf_code_syntax_documentation_comment">/*必须同时释放左右手的筷子*/</span>
    <span class="sf_code_syntax_project">public</span> <span class="sf_code_syntax_project">synchronized</span> <span class="sf_code_syntax_project">void</span> putFork(){
        <span class="sf_code_syntax_project">String</span>  name <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_project">Thread</span><span class="sf_code_syntax_keyword">.</span>currentThread()<span class="sf_code_syntax_keyword">.</span>getName();
        <span class="sf_code_syntax_project">int</span> i <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_project">Integer</span><span class="sf_code_syntax_keyword">.</span>parseInt(name);

        used[i]<span class="sf_code_syntax_keyword">=</span><span class="sf_code_syntax_number">false</span>;
        used[(i<span class="sf_code_syntax_keyword">+</span><span class="sf_code_syntax_number">1</span>)<span class="sf_code_syntax_keyword">%</span><span class="sf_code_syntax_number">5</span>] <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">false</span>;
        notifyAll();
    }
}

<span class="sf_code_syntax_comment">//////////////////////////测试类
</span><span class="sf_code_syntax_project">class</span> <span class="sf_code_syntax_project">Test</span>{
    <span class="sf_code_syntax_project">public</span> <span class="sf_code_syntax_project">static</span> <span class="sf_code_syntax_project">void</span> main(<span class="sf_code_syntax_project">String</span>[] args) {
        <span class="sf_code_syntax_project">Fork</span> fork <span class="sf_code_syntax_keyword">=new</span> <span class="sf_code_syntax_project">Fork</span>();
        <span class="sf_code_syntax_keyword">new</span> <span class="sf_code_syntax_project">Philosopher</span>(<span class="sf_code_syntax_string">"0"</span> , fork)<span class="sf_code_syntax_keyword">.</span>start();
        <span class="sf_code_syntax_keyword">new</span> <span class="sf_code_syntax_project">Philosopher</span>(<span class="sf_code_syntax_string">"1"</span> , fork)<span class="sf_code_syntax_keyword">.</span>start();
        <span class="sf_code_syntax_keyword">new</span> <span class="sf_code_syntax_project">Philosopher</span>(<span class="sf_code_syntax_string">"2"</span> , fork)<span class="sf_code_syntax_keyword">.</span>start();
        <span class="sf_code_syntax_keyword">new</span> <span class="sf_code_syntax_project">Philosopher</span>(<span class="sf_code_syntax_string">"3"</span> , fork)<span class="sf_code_syntax_keyword">.</span>start();
        <span class="sf_code_syntax_keyword">new</span> <span class="sf_code_syntax_project">Philosopher</span>(<span class="sf_code_syntax_string">"4"</span> , fork)<span class="sf_code_syntax_keyword">.</span>start();
    }
}

</code></pre>
        </div>
        <script type="text/javascript">
            (function() {

    var doc_ols = document.getElementsByTagName("ol");

    for ( i=0; i<doc_ols.length; i++) {

        var ol_start = doc_ols[i].getAttribute("start") - 1;
        doc_ols[i].setAttribute("style", "counter-reset:ol " + ol_start + ";");

    }

})();
        </script>
        <style>
            html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}html{line-height:1}ol,ul{list-style:none}table{border-collapse:collapse;border-spacing:0}caption,th,td{text-align:left;font-weight:normal;vertical-align:middle}q,blockquote{quotes:none}q:before,q:after,blockquote:before,blockquote:after{content:"";content:none}a img{border:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}*{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}html{font-size:87.5%;line-height:1.57143em}html{font-size:14px;line-height:1.6em;-webkit-text-size-adjust:100%}body{background:#fcfcfc;color:#545454;text-rendering:optimizeLegibility;font-family:"AvenirNext-Regular"}a{color:#de4c4f;text-decoration:none}h1{font-family:"AvenirNext-Medium";color:#333;font-size:1.6em;line-height:1.3em;margin-bottom:.78571em}h2{font-family:"AvenirNext-Medium";color:#333;font-size:1.3em;line-height:1em;margin-bottom:.62857em}h3{font-family:"AvenirNext-Medium";color:#333;font-size:1.15em;line-height:1em;margin-bottom:.47143em}p{margin-bottom:1.57143em;hyphens:auto}hr{height:1px;border:0;background-color:#dedede;margin:-1px auto 1.57143em auto}ul,ol{margin-bottom:.31429em}ul ul,ul ol,ol ul,ol ol{margin-bottom:0px}ol li:before{content:counter(ol) ".";counter-increment:ol;color:#e06e73;text-align:right;display:inline-block;min-width:1em;margin-right:0.5em}b,strong{font-family:"AvenirNext-Bold"}i,em{font-family:"AvenirNext-Italic"}code{font-family:"Menlo-Regular"}.text-overflow-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sf_code_syntax_string{color:#D33905}.sf_code_syntax_comment{color:#838383}.sf_code_syntax_documentation_comment{color:#128901}.sf_code_syntax_number{color:#0E73A2}.sf_code_syntax_project{color:#5B2599}.sf_code_syntax_keyword{color:#0E73A2}.sf_code_syntax_character{color:#1B00CE}.sf_code_syntax_preprocessor{color:#920448}.note-wrapper{max-width:46em;margin:0px auto;padding:1.57143em 3.14286em}.note-wrapper.spotlight-preview{overflow-x:hidden}u{text-decoration:none;background-image:linear-gradient(to bottom, rgba(0,0,0,0) 50%,#e06e73 50%);background-repeat:repeat-x;background-size:2px 2px;background-position:0 1.05em}s{color:#878787}p{margin-bottom:0.1em}hr{margin-bottom:0.7em;margin-top:0.7em}ul li{text-indent:-0.35em}ul li:before{content:"•";color:#e06e73;display:inline-block;margin-right:0.3em}ul ul{margin-left:1.25714em}ol li{text-indent:-1.45em}ol ol{margin-left:1.25714em}blockquote{display:block;margin-left:-1em;padding-left:0.8em;border-left:0.2em solid #e06e73}.todo-list ul{margin-left:1.88571em}.todo-list li{text-indent:-1.75em}.todo-list li:before{content:"";display:static;margin-right:0px}.todo-checkbox{text-indent:-1.7em}.todo-checkbox svg{margin-right:0.3em;position:relative;top:0.2em}.todo-checkbox svg #check{display:none}.todo-checkbox.todo-checked #check{display:inline}.todo-checkbox.todo-checked .todo-text{text-decoration:line-through;color:#878787}.code-inline{display:inline;background:white;border:solid 1px #dedede;padding:0.2em 0.5em;font-size:0.9em}.code-multiline{display:block;background:white;border:solid 1px #dedede;padding:0.7em 1em;font-size:0.9em;overflow-x:auto}.hashtag{display:inline-block;color:white;background:#b8bfc2;padding:0.0em 0.5em;border-radius:1em;text-indent:0}.hashtag a{color:#fff}.address a{color:#545454;background-image:linear-gradient(to bottom, rgba(0,0,0,0) 50%,#0da35e 50%);background-repeat:repeat-x;background-size:2px 2px;background-position:0 1.05em}.address svg{position:relative;top:0.2em;display:inline-block;margin-right:0.2em}.color-preview{display:inline-block;width:1em;height:1em;border:solid 1px rgba(0,0,0,0.3);border-radius:50%;margin-right:0.1em;position:relative;top:0.2em;white-space:nowrap}.color-code{margin-right:0.2em;font-family:"Menlo-Regular";font-size:0.9em}.color-hash{opacity:0.4}.ordered-list-number{color:#e06e73;text-align:right;display:inline-block;min-width:1em}.arrow svg{position:relative;top:0.08em;display:inline-block;margin-right:0.15em;margin-left:0.15em}.arrow svg #rod{stroke:#545454}.arrow svg #point{fill:#545454}mark{color:inherit;display:inline-block;padding:0px 4px;background-color:#fcffc0}img{max-width:100%;height:auto}

        </style>
    </body>
</html>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-03-20</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://yoursite.com/2018/03/20/哲学家就餐问题/,做只猫,,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2018/03/20/哲学家就餐问题/" title="哲学家就餐问题">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/03/19/一个线程打印 1~52,另一个线程打印字母A-Z。打印顺序为12A34B56C……5152Z/" title="一个线程打印 1~52,另一个线程打印字母A-Z。打印顺序为12A34B56C……5152Z。">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>